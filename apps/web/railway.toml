[build]
builder = "NIXPACKS"
buildCommand = "cd ../.. && npm install -g pnpm && pnpm install --frozen-lockfile && pnpm build"

[deploy]
startCommand = "cd apps/web && npm install -g pnpm && pnpm preview"
numReplicas = 1
restartPolicyType = "ON_FAILURE"
restartPolicyMaxRetries = 3

[deploy.healthcheck]
httpPath = "/"
initialDelaySeconds = 10
periodSeconds = 30
timeoutSeconds = 10
successThreshold = 1
failureThreshold = 3